<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Label Generator</title>
    <style>
        body {
            font-family: Helvetica, Arial, sans-serif;
            margin: 20px;
            padding: 0;
        }

        .controls {
            margin-bottom: 20px;
        }

        #sizeToggle {
            margin-left: 10px;
            transform: scale(1.5);
            cursor: pointer;
        }

        #sizeLabel {
            margin-left: 10px;
            font-weight: bold;
        }

        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="controls">
        <label for="sizeToggle">Label Size:</label>
        <input type="checkbox" id="sizeToggle">
        <span id="sizeLabel">Small (75x35 mm)</span>
    </div>

    <!-- SVG Label -->
    <svg id="svgLabel" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 283 132" width="283" height="132">
        <rect width="100%" height="100%" fill="white" />
        <text x="10" y="40" fill="#333333" font-family="Helvetica" font-size="24" font-weight="bold">Product Name</text>
        <text x="10" y="70" fill="#333333" font-family="Helvetica" font-size="14">250g</text>
        <text x="10" y="110" fill="#333333" font-family="Helvetica" font-size="32" font-weight="bold">$5.99</text>
    </svg>

    <button onclick="downloadPNG()">Download PNG</button>

    <script>
        // Toggle size between Small (75x35 mm) and Large (4x2 inch)
        document.getElementById('sizeToggle').addEventListener('change', function () {
            const svgLabel = document.getElementById('svgLabel');
            const sizeLabel = document.getElementById('sizeLabel');

            if (this.checked) {
                // Set to 4x2 inch (large label)
                svgLabel.setAttribute('viewBox', '0 0 384 192'); // 4x2 inches in 96 DPI
                svgLabel.setAttribute('width', '384'); // Width for 4 inches
                svgLabel.setAttribute('height', '192'); // Height for 2 inches
                sizeLabel.textContent = 'Large (4x2 inch)';
            } else {
                // Set to 75x35 mm (small label)
                svgLabel.setAttribute('viewBox', '0 0 283 132'); // 75x35 mm in pixels at 96 DPI
                svgLabel.setAttribute('width', '283'); // Width for 75 mm
                svgLabel.setAttribute('height', '132'); // Height for 35 mm
                sizeLabel.textContent = 'Small (75x35 mm)';
            }
        });

        // Download the SVG as a high-quality PNG
        function downloadPNG() {
            const svgElement = document.getElementById('svgLabel'); // Get the SVG element
            const svgData = new XMLSerializer().serializeToString(svgElement); // Serialize the SVG

            // Create a blob from the SVG
            const blob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(blob);

            // Create an image element and load the SVG blob
            const img = new Image();
            img.onload = () => {
                // Create a canvas with a higher resolution (e.g., 4x)
                const scaleFactor = 14; // Adjust for higher resolution
                const canvas = document.createElement('canvas');
                canvas.width = (svgElement.viewBox.baseVal.width || 283) * scaleFactor;
                canvas.height = (svgElement.viewBox.baseVal.height || 132) * scaleFactor;

                const ctx = canvas.getContext('2d');
                ctx.scale(scaleFactor, scaleFactor); // Scale the canvas

                // Draw the SVG onto the canvas
                ctx.drawImage(img, 0, 0);

                // Convert the canvas to a PNG
                canvas.toBlob((blob) => {
                    const link = document.createElement('a');
                    link.href = URL.createObjectURL(blob);
                    link.download = 'etiket.png';
                    link.click();

                    // Cleanup object URLs
                    URL.revokeObjectURL(url);
                    URL.revokeObjectURL(link.href);
                }, 'image/png');
            };

            img.onerror = (err) => {
                console.error('Failed to render SVG as PNG:', err);
            };

            img.src = url; // Set the image source to the SVG blob URL
        }
    </script>
</body>
</html>
